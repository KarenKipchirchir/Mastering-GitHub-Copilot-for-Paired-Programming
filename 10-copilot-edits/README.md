---

# üì∫ Azure API Management & AI: See Copilot Edits in Action! üë©‚Äçüíª

## Introduction

In this lesson, the focus is on Azure API Management policies and Copilot Edits. Copilot Edits is currently in preview and available to all GitHub Copilot users.

Struggling with Azure API Management policies? ü§Ø

In the latest YouTube video, the world of Copilot Edits is explored to show how they can supercharge API development. A real-world scenario is presented, demonstrating how Copilot assists in writing, testing, and refining API policies faster than ever.  
Click the link below to watch the full demo and check out Copilot Edits and APIM policies! üëá

üåê [YouTube Video Link]

üí° **Pro Tip:** To get the most out of this demo, ensure the latest version of the Azure API Management extension for VS Code is installed. It can be downloaded *An external link was removed to protect your privacy.*.

## Exercise

### Demo Overview

Explore how to use Copilot Edits in Visual Studio Code to accelerate the journey with Azure API Management policies.

- Open Visual Studio Code.
- Install the Azure API Management extension.
- Open the APIM service within the IDE.

### Understanding Azure API Management Policies

Azure API Management policies allow changes to API behaviour through configuration using policies. These policies are a collection of statements, described in an XML document, that are run sequentially and can apply to API requests and responses.

- Learn about Azure API Management policies.
- Understand the structure and purpose of policies.
- Use the APIM VS Code extension to write policies.

### Starting the Demo

Begin the demo in the Azure Portal to find the deployed Echo-API and see all operations, such as a POST operation to create resources.

- Navigate to the Azure Portal.
- Locate the deployed Echo-API.
- Review the available operations.

### Scenario

Create a container called "logs-jukasper" in an Azure Storage Account to securely upload blob files using an API call through Azure API Management.

- Access the Azure Storage Account.
- Create a container named "logs-jukasper".
- Prepare to upload blob files securely.

### Using GitHub Copilot Edits

As a newcomer to Azure Policies, use GitHub Copilot to write the API policy and Copilot Edits to modify the policy in the current working file.

- Open the working file in Visual Studio Code.
- Use GitHub Copilot to write the API policy.
- Apply Copilot Edits to modify the policy.

### Testing and Iterating

Test and experiment with Copilot Edits, as outcomes may vary based on the prompts provided.

- Test the changes made by Copilot.
- Accept or discard the suggested edits.
- Continue refining the policy using Copilot's input.

### Modifying the Policy

Provide the URL to the endpoint, which in this case is the Azure Storage Account and container.

- Identify the endpoint URL.
- Modify the policy to include the endpoint URL.
- Ensure the policy meets the requirements.

### Handling Errors

If the prompt does not provide the authentication via managed identity as requested, provide new instructions.

- Review the prompt and identify missing elements.
- Provide new instructions to Copilot.
- Accept the suggested changes if satisfactory.

### Deploying and Testing

Save the changes and upload them to the APIM service in the cloud.

- Save the modified policy.
- Upload the changes to the APIM service.
- Check the output window for errors and insights.

### Adding Header Parameters

Request Copilot to include a header parameter in the policy.

- Ask Copilot to add a header parameter.
- Accept the suggested changes.
- Upload the updated policy.

### Testing the API Call

Use the VS Code extension to select the operation to test, which will open an HTTP file for testing the API call.

- Select the operation to test.
- Open the HTTP file for testing.
- Provide the APIM subscription key.
- Send the request and verify the response.

### Verifying the Results

Check the storage account to confirm the creation of a blob file.

- Access the storage account.
- Verify the creation of the blob file.
- Modify the policy if the naming convention is not as expected.

### Final Testing

Provide the subscription key and send the request again.

- Provide the subscription key.
- Send the request.
- Verify the successful response.
- Check the storage account for new files with relevant information about the API calls.

## Conclusion

This demo showcases a great way to leverage the power of AI with GitHub Copilot Edits to get started with writing Azure API Management policies.

---

 
